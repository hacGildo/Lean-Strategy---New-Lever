<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Estratégico - New Lever</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --research: #8e44ad;
            --innovation: #e67e22;
            --border-radius: 10px;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            position: relative;
        }
        
        .logo {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .logo i {
            color: var(--accent);
        }
        
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .vision-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Tabs Navigation */
        .tabs-container {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .tabs-header {
            display: flex;
            background: var(--light);
            border-bottom: 2px solid var(--secondary);
            overflow-x: auto;
        }
        
        .tab-btn {
            padding: 18px 30px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }
        
        .tab-btn:hover {
            background: rgba(52, 152, 219, 0.1);
            color: var(--secondary);
        }
        
        .tab-btn.active {
            background: var(--secondary);
            color: white;
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent);
        }
        
        .tab-icon {
            font-size: 1.2rem;
        }
        
        /* Tabs Content */
        .tabs-content {
            padding: 40px;
        }
        
        .tab-pane {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .tab-pane.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Content Styles */
        .tab-title {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .tab-subtitle {
            font-size: 1.3rem;
            color: var(--secondary);
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .info-card {
            background: var(--light);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .info-card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .card-icon {
            width: 50px;
            height: 50px;
            background: var(--secondary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .card-title {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        /* SWOT Grid */
        .swot-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .swot-item {
            padding: 25px;
            border-radius: var(--border-radius);
            border-left: 4px solid;
        }
        
        .swot-strengths { border-left-color: var(--success); background: rgba(39, 174, 96, 0.1); }
        .swot-weaknesses { border-left-color: var(--warning); background: rgba(243, 156, 18, 0.1); }
        .swot-opportunities { border-left-color: var(--secondary); background: rgba(52, 152, 219, 0.1); }
        .swot-threats { border-left-color: var(--accent); background: rgba(231, 76, 60, 0.1); }
        
        .swot-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* OKR Styles */
        .okr-container {
            margin-bottom: 40px;
        }
        
        .okr-card {
            background: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary);
        }
        
        .okr-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .okr-icon {
            font-size: 2rem;
            color: var(--secondary);
        }
        
        .okr-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 700;
        }
        
        .krs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .kr-item {
            background: var(--light);
            padding: 15px;
            border-radius: var(--border-radius);
            border-left: 3px solid var(--accent);
        }
        
        .kr-metric {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        /* KPI Styles */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .kpi-card {
            background: white;
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--secondary);
        }
        
        .kpi-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            display: block;
            margin-bottom: 10px;
            outline: none;
            border: 1px dashed transparent;
            padding: 5px;
            border-radius: 5px;
        }
        
        .kpi-number:focus {
            border-color: var(--secondary);
            background: rgba(52, 152, 219, 0.05);
        }
        
        .kpi-label {
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        /* Strategy Styles */
        .strategy-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .strategy-column {
            background: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        
        .in-out-list {
            list-style: none;
            padding: 0;
        }
        
        .in-out-list li {
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .in-item {
            background: rgba(39, 174, 96, 0.1);
            border-left: 3px solid var(--success);
        }
        
        .out-item {
            background: rgba(231, 76, 60, 0.1);
            border-left: 3px solid var(--accent);
        }
        
        /* Risks Styles */
        .risks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .risk-card {
            background: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border-left: 4px solid var(--warning);
        }
        
        .risk-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            background: var(--dark);
            color: white;
            border-radius: var(--border-radius);
            margin-top: 40px;
        }
        
        .footer-info {
            opacity: 0.8;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .tabs-header {
                flex-direction: column;
            }
            
            .tab-btn {
                justify-content: center;
                padding: 15px;
            }
            
            .logo {
                font-size: 2.2rem;
            }
            
            .tab-title {
                font-size: 1.8rem;
            }
            
            .swot-grid,
            .strategy-grid {
                grid-template-columns: 1fr;
            }
            
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .goals-strip {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .kpi-grid {
                grid-template-columns: 1fr;
            }
            
            .krs-grid {
                grid-template-columns: 1fr;
            }
            
            .goal-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .goal .btns {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        /* Estilos de impressão */
        @media print {
            body { 
                background: #fff; 
                color: #000;
            }
            header, footer { 
                box-shadow: none; 
                background: #f8f9fa !important;
                color: #000 !important;
            }
            .tabs-header { 
                display: none; 
            }
            /* imprime somente a aba ativa */
            .tab-pane { 
                display: none !important; 
            }
            .tab-pane.active { 
                display: block !important; 
            }
            /* remove efeitos */
            .info-card:hover, .okr-card:hover, .kpi-card:hover, .risk-card:hover { 
                transform: none; 
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            .kpi-number {
                border: none !important;
                background: transparent !important;
            }
            .vision-box + div {
                display: none !important;
            }
            
            /* Esconde os botões dos semáforos na impressão */
            .goal-buttons {
                display: none !important;
            }
            
            /* Mostra o status em texto nos semáforos na impressão */
            .goal-status-text {
                display: inline-block !important;
                margin-left: 10px;
                font-weight: bold;
            }
        }
        
        /* NOVO ESTILO DOS SEMÁFOROS - LINHAS COMPACTAS */
        .goals-strip {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .goal {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .goal-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            flex: 0 0 16px;
            background: #f1c40f; /* default yellow */
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
        }
        
        .goal-text {
            flex: 1;
            font-weight: 600;
            font-size: 1rem;
        }
        
        .goal-buttons {
            display: flex;
            gap: 6px;
        }
        
        .goal-button {
            border: none;
            border-radius: 16px;
            padding: 6px 12px;
            font-weight: 700;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 0.85rem;
            transition: all 0.2s ease;
        }
        
        .goal-button:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        .goal-button.active {
            background: white;
        }
        
        .goal-button[data-val="green"].active {
            color: #27ae60;
        }
        
        .goal-button[data-val="yellow"].active {
            color: #f39c12;
        }
        
        .goal-button[data-val="red"].active {
            color: #e74c3c;
        }
        
        /* Texto do status para impressão (inicialmente oculto) */
        .goal-status-text {
            display: none;
        }

        /* NOVOS ESTILOS ADICIONADOS */
        
        /* Indicadores de progresso nos OKRs */
        .progress-container {
            margin-top: 15px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--success);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        /* Sistema de notas */
        .notes-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        .notes-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notes-textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 0.95rem;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        .notes-textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        /* Gráficos para KPIs */
        .kpi-chart {
            margin-top: 15px;
            height: 120px;
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            padding: 0 10px;
        }
        
        .chart-bar {
            width: 30px;
            background: var(--secondary);
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: height 0.5s ease;
        }
        
        .chart-bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            white-space: nowrap;
        }
        
        /* Barra de busca */
        .search-container {
            margin-bottom: 20px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }
        
        /* Indicador de última atualização */
        .last-updated {
            font-size: 0.85rem;
            color: #777;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Botões de ação */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .action-btn {
            padding: 10px 20px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .action-btn.secondary {
            background: var(--light);
            color: var(--dark);
        }
        
        .action-btn.secondary:hover {
            background: #d5dbdb;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <i class="fas fa-chess-knight"></i>
                NEW LEVER
            </div>
            <h1>Dashboard Estratégico</h1>
            <p class="subtitle">Lean Strategy - Multiplicando capacidade jurídica com IA multiagente</p>
            
            <div class="vision-box">
                <h3><i class="fas fa-bullseye"></i> Visão Fixa</h3>
                <p>"Multiplicar a capacidade dos escritórios jurídicos sem aumentar equipes, usando IA multiagente."</p>
            </div>
            
            <!-- SEMÁFORO DOS 3 OBJETIVOS - NOVO LAYOUT -->
            <div class="goals-strip" id="goalsStrip">
                <div class="goal">
                    <span class="goal-dot" id="dot-pmf"></span>
                    <span class="goal-text">Validar PMF do Contesta.ai</span>
                    <div class="goal-buttons">
                        <button class="goal-button" data-goal="pmf" data-val="green">Verde</button>
                        <button class="goal-button" data-goal="pmf" data-val="yellow">Amarelo</button>
                        <button class="goal-button" data-goal="pmf" data-val="red">Vermelho</button>
                    </div>
                    <span class="goal-status-text" id="status-text-pmf"></span>
                </div>

                <div class="goal">
                    <span class="goal-dot" id="dot-org"></span>
                    <span class="goal-text">Organograma & Processos</span>
                    <div class="goal-buttons">
                        <button class="goal-button" data-goal="org" data-val="green">Verde</button>
                        <button class="goal-button" data-goal="org" data-val="yellow">Amarelo</button>
                        <button class="goal-button" data-goal="org" data-val="red">Vermelho</button>
                    </div>
                    <span class="goal-status-text" id="status-text-org"></span>
                </div>

                <div class="goal">
                    <span class="goal-dot" id="dot-fund"></span>
                    <span class="goal-text">Captação de Investimento</span>
                    <div class="goal-buttons">
                        <button class="goal-button" data-goal="fund" data-val="green">Verde</button>
                        <button class="goal-button" data-goal="fund" data-val="yellow">Amarelo</button>
                        <button class="goal-button" data-goal="fund" data-val="red">Vermelho</button>
                    </div>
                    <span class="goal-status-text" id="status-text-fund"></span>
                </div>
            </div>
            <!-- /SEMÁFORO -->
            
            <!-- Botão Exportar PDF -->
            <div style="margin-top:20px;">
                <button onclick="window.print()" style="background:#fff;border:0;padding:10px 14px;border-radius:8px;font-weight:700;cursor:pointer;">
                    <i class="fas fa-file-export"></i> Exportar PDF
                </button>
            </div>
        </header>
        
        <!-- Barra de busca -->
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Buscar no dashboard...">
            <i class="fas fa-search search-icon"></i>
        </div>
        
        <!-- Tabs Navigation -->
        <div class="tabs-container">
            <div class="tabs-header">
                <button class="tab-btn active" data-tab="analise">
                    <i class="fas fa-chart-bar tab-icon"></i>
                    Análise SWOT
                </button>
                <button class="tab-btn" data-tab="okrs">
                    <i class="fas fa-bullseye tab-icon"></i>
                    OKRs
                </button>
                <button class="tab-btn" data-tab="kpis">
                    <i class="fas fa-tachometer-alt tab-icon"></i>
                    KPIs
                </button>
                <button class="tab-btn" data-tab="estrategia">
                    <i class="fas fa-chess-board tab-icon"></i>
                    Estratégia
                </button>
                <button class="tab-btn" data-tab="execucao">
                    <i class="fas fa-cogs tab-icon"></i>
                    Execução
                </button>
                <button class="tab-btn" data-tab="riscos">
                    <i class="fas fa-exclamation-triangle tab-icon"></i>
                    Riscos
                </button>
            </div>
            
            <div class="tabs-content">
                <!-- Tab Análise SWOT -->
                <div class="tab-pane active" id="analise">
                    <h2 class="tab-title">
                        <i class="fas fa-chart-bar"></i>
                        Análise SWOT
                    </h2>
                    <p class="tab-subtitle">Essência da posição estratégica da New Lever</p>
                    
                    <div class="swot-grid">
                        <div class="swot-item swot-strengths">
                            <h3 class="swot-title">
                                <i class="fas fa-check-circle"></i>
                                Forças
                            </h3>
                            <ul>
                                <li>Time sênior de IA jurídica</li>
                                <li>Arquitetura multiagente</li>
                                <li>Integração com ERPs</li>
                                <li>Validação com clientes</li>
                            </ul>
                        </div>
                        
                        <div class="swot-item swot-weaknesses">
                            <h3 class="swot-title">
                                <i class="fas fa-exclamation-triangle"></i>
                                Fraquezas
                            </h3>
                            <ul>
                                <li>PMF ainda parcial</li>
                                <li>Funil comercial incipiente</li>
                                <li>Dispersão de frentes</li>
                            </ul>
                        </div>
                        
                        <div class="swot-item swot-opportunities">
                            <h3 class="swot-title">
                                <i class="fas fa-rocket"></i>
                                Oportunidades
                            </h3>
                            <ul>
                                <li>Automação jurídica subpenetrada</li>
                                <li>Dor clara em prazos/volume</li>
                                <li>Vantagem de especialização setorial</li>
                            </ul>
                        </div>
                        
                        <div class="swot-item swot-threats">
                            <h3 class="swot-title">
                                <i class="fas fa-shield-alt"></i>
                                Ameaças
                            </h3>
                            <ul>
                                <li>Internalização por grandes bancas</li>
                                <li>Entrada de players globais</li>
                                <li>"Feature factory" sem diferenciação</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Notas para Análise SWOT -->
                    <div class="notes-section">
                        <h3 class="notes-title">
                            <i class="fas fa-sticky-note"></i>
                            Observações sobre Análise SWOT
                        </h3>
                        <textarea class="notes-textarea" id="swot-notes" placeholder="Adicione observações, insights ou próximos passos relacionados à análise SWOT..."></textarea>
                        <div class="last-updated">
                            <i class="far fa-clock"></i>
                            <span id="swot-last-updated">Nunca atualizado</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tab OKRs -->
                <div class="tab-pane" id="okrs">
                    <h2 class="tab-title">
                        <i class="fas fa-bullseye"></i>
                        OKRs Estratégicos
                    </h2>
                    <p class="tab-subtitle">Objetivos e Resultados-Chave para os próximos 6 meses</p>
                    
                    <div class="okr-container">
                        <div class="okr-card">
                            <div class="okr-header">
                                <div class="okr-icon">
                                    <i class="fas fa-bullseye"></i>
                                </div>
                                <h3 class="okr-title">O1 — Validar o PMF do Contesta.ai</h3>
                            </div>
                            
                            <!-- Indicador de progresso -->
                            <div class="progress-container">
                                <div class="progress-label">
                                    <span>Progresso do objetivo</span>
                                    <span id="progress-pmf">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill-pmf" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div class="krs-grid">
                                <div class="kr-item">
                                    <div class="kr-metric">10 clientes ativos pagantes no ICP</div>
                                    <div class="kr-description">Base de clientes validada</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="pmf-1">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="pmf-1" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">NPS ≥ 8 e retenção 90 dias ≥ 70%</div>
                                    <div class="kr-description">Satisfação e retenção comprovadas</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="pmf-2">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="pmf-2" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">Reduzir tempo produção em ≥ 60%</div>
                                    <div class="kr-description">Eficiência demonstrada</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="pmf-3">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="pmf-3" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">Publicar 2 cases de sucesso</div>
                                    <div class="kr-description">Evidências de valor</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="pmf-4">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="pmf-4" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="okr-card">
                            <div class="okr-header">
                                <div class="okr-icon">
                                    <i class="fas fa-sitemap"></i>
                                </div>
                                <h3 class="okr-title">O2 — Estruturar a organização</h3>
                            </div>
                            
                            <!-- Indicador de progresso -->
                            <div class="progress-container">
                                <div class="progress-label">
                                    <span>Progresso do objetivo</span>
                                    <span id="progress-org">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill-org" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div class="krs-grid">
                                <div class="kr-item">
                                    <div class="kr-metric">Organograma mínimo viável</div>
                                    <div class="kr-description">Owners claros em todas as áreas</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="org-1">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="org-1" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">Rituais semanais estabelecidos</div>
                                    <div class="kr-description">Gestão de métricas e produto</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="org-2">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="org-2" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">3 processos documentados</div>
                                    <div class="kr-description">Onboarding, feedback, suporte/SLA</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="org-3">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="org-3" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="okr-card">
                            <div class="okr-header">
                                <div class="okr-icon">
                                    <i class="fas fa-hand-holding-usd"></i>
                                </div>
                                <h3 class="okr-title">O3 — Preparar captação de investimento</h3>
                            </div>
                            
                            <!-- Indicador de progresso -->
                            <div class="progress-container">
                                <div class="progress-label">
                                    <span>Progresso do objetivo</span>
                                    <span id="progress-fund">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill-fund" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div class="krs-grid">
                                <div class="kr-item">
                                    <div class="kr-metric">Pitch deck atualizado</div>
                                    <div class="kr-description">Com métricas reais do Contesta.ai</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="fund-1">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="fund-1" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">Pipeline de 30 investidores</div>
                                    <div class="kr-description">Fundos-alvo identificados</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="fund-2">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="fund-2" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">10 reuniões de apresentação</div>
                                    <div class="kr-description">Execução do processo</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="fund-3">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="fund-3" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="kr-item">
                                    <div class="kr-metric">1 LOI/term sheet</div>
                                    <div class="kr-description">Resultado concreto</div>
                                    <div class="progress-container">
                                        <div class="progress-label">
                                            <span>Progresso</span>
                                            <span class="kr-progress" data-kr="fund-4">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill kr-progress-fill" data-kr="fund-4" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notas para OKRs -->
                    <div class="notes-section">
                        <h3 class="notes-title">
                            <i class="fas fa-sticky-note"></i>
                            Observações sobre OKRs
                        </h3>
                        <textarea class="notes-textarea" id="okr-notes" placeholder="Adicione observações, insights ou próximos passos relacionados aos OKRs..."></textarea>
                        <div class="last-updated">
                            <i class="far fa-clock"></i>
                            <span id="okr-last-updated">Nunca atualizado</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tab KPIs -->
                <div class="tab-pane" id="kpis">
                    <h2 class="tab-title">
                        <i class="fas fa-tachometer-alt"></i>
                        KPIs de Acompanhamento
                    </h2>
                    <p class="tab-subtitle">Métricas-chave e faróis do negócio</p>
                    
                    <div class="content-grid">
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <h3 class="card-title">North Star Metrics</h3>
                            </div>
                            <ul>
                                <li><strong>Ativação inicial:</strong> % clientes onboarding em 14 dias</li>
                                <li><strong>Uso recorrente:</strong> % clientes uso semanal</li>
                                <li><strong>Tempo produção:</strong> redução % tempo contestação</li>
                                <li><strong>NPS:</strong> satisfação cliente Contesta.ai</li>
                            </ul>
                        </div>
                        
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h3 class="card-title">KPIs Financeiros</h3>
                            </div>
                            <ul>
                                <li><strong>CAC payback:</strong> ≤ 3 meses</li>
                                <li><strong>LTV/CAC:</strong> ≥ 3</li>
                                <li><strong>Taxa de fecho:</strong> ≥ 25%</li>
                                <li><strong>Runway:</strong> ≥ 6 meses</li>
                                <li><strong>Receita POCs:</strong> ≥ 80%</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <span class="kpi-number" contenteditable="true" data-kpi="ativacao">≥ 80%</span>
                            <span class="kpi-label">Ativação Inicial</span>
                            <!-- Gráfico para KPI -->
                            <div class="kpi-chart">
                                <div class="chart-bar" style="height: 70%">
                                    <span class="chart-bar-label">Jan</span>
                                </div>
                                <div class="chart-bar" style="height: 65%">
                                    <span class="chart-bar-label">Fev</span>
                                </div>
                                <div class="chart-bar" style="height: 75%">
                                    <span class="chart-bar-label">Mar</span>
                                </div>
                                <div class="chart-bar" style="height: 80%">
                                    <span class="chart-bar-label">Abr</span>
                                </div>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-number" contenteditable="true" data-kpi="uso">≥ 70%</span>
                            <span class="kpi-label">Uso Recorrente</span>
                            <!-- Gráfico para KPI -->
                            <div class="kpi-chart">
                                <div class="chart-bar" style="height: 60%">
                                    <span class="chart-bar-label">Jan</span>
                                </div>
                                <div class="chart-bar" style="height: 65%">
                                    <span class="chart-bar-label">Fev</span>
                                </div>
                                <div class="chart-bar" style="height: 68%">
                                    <span class="chart-bar-label">Mar</span>
                                </div>
                                <div class="chart-bar" style="height: 70%">
                                    <span class="chart-bar-label">Abr</span>
                                </div>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-number" contenteditable="true" data-kpi="tempo">-60%</span>
                            <span class="kpi-label">Tempo Produção</span>
                            <!-- Gráfico para KPI -->
                            <div class="kpi-chart">
                                <div class="chart-bar" style="height: 30%">
                                    <span class="chart-bar-label">Jan</span>
                                </div>
                                <div class="chart-bar" style="height: 40%">
                                    <span class="chart-bar-label">Fev</span>
                                </div>
                                <div class="chart-bar" style="height: 50%">
                                    <span class="chart-bar-label">Mar</span>
                                </div>
                                <div class="chart-bar" style="height: 60%">
                                    <span class="chart-bar-label">Abr</span>
                                </div>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-number" contenteditable="true" data-kpi="nps">NPS ≥ 8</span>
                            <span class="kpi-label">Satisfação</span>
                            <!-- Gráfico para KPI -->
                            <div class="kpi-chart">
                                <div class="chart-bar" style="height: 60%">
                                    <span class="chart-bar-label">Jan</span>
                                </div>
                                <div class="chart-bar" style="height: 70%">
                                    <span class="chart-bar-label">Fev</span>
                                </div>
                                <div class="chart-bar" style="height: 75%">
                                    <span class="chart-bar-label">Mar</span>
                                </div>
                                <div class="chart-bar" style="height: 80%">
                                    <span class="chart-bar-label">Abr</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notas para KPIs -->
                    <div class="notes-section">
                        <h3 class="notes-title">
                            <i class="fas fa-sticky-note"></i>
                            Observações sobre KPIs
                        </h3>
                        <textarea class="notes-textarea" id="kpi-notes" placeholder="Adicione observações, insights ou próximos passos relacionados aos KPIs..."></textarea>
                        <div class="last-updated">
                            <i class="far fa-clock"></i>
                            <span id="kpi-last-updated">Nunca atualizado</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Estratégia -->
                <div class="tab-pane" id="estrategia">
                    <h2 class="tab-title">
                        <i class="fas fa-chess-board"></i>
                        Estratégia Deliberada
                    </h2>
                    <p class="tab-subtitle">Limites claros e foco estratégico</p>
                    
                    <div class="strategy-grid">
                        <div class="strategy-column">
                            <h3 style="color: var(--success); margin-bottom: 20px;">
                                <i class="fas fa-check-circle"></i>
                                IN - Foco Estratégico
                            </h3>
                            <ul class="in-out-list">
                                <li class="in-item">
                                    <i class="fas fa-check"></i>
                                    Contesta.ai
                                </li>
                                <li class="in-item">
                                    <i class="fas fa-check"></i>
                                    Integrações essenciais
                                </li>
                                <li class="in-item">
                                    <i class="fas fa-check"></i>
                                    Escritórios de volume (trabalhista/contencioso)
                                </li>
                            </ul>
                        </div>
                        
                        <div class="strategy-column">
                            <h3 style="color: var(--accent); margin-bottom: 20px;">
                                <i class="fas fa-times-circle"></i>
                                OUT - Não Fazer
                            </h3>
                            <ul class="in-out-list">
                                <li class="out-item">
                                    <i class="fas fa-times"></i>
                                    Novos produtos sem PMF
                                </li>
                                <li class="out-item">
                                    <i class="fas fa-times"></i>
                                    Serviços customizados fora do escopo
                                </li>
                                <li class="out-item">
                                    <i class="fas fa-times"></i>
                                    Branding amplo
                                </li>
                                <li class="out-item">
                                    <i class="fas fa-times"></i>
                                    Expansão internacional
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="content-grid" style="margin-top: 40px;">
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-sync-alt"></i>
                                </div>
                                <h3 class="card-title">Ciclo de Aprendizado</h3>
                            </div>
                            <p><strong>Hipóteses → Testes → Métricas → Decisão</strong></p>
                            <p>Testes: POCs, pricing, integrações</p>
                            <p>Decisão: go/kill/ajuste</p>
                            <p><strong>Ritmo:</strong> ciclos quinzenais + review trimestral</p>
                        </div>
                        
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-arrows-alt-h"></i>
                                </div>
                                <h3 class="card-title">Estratégia Emergente</h3>
                            </div>
                            <p>Ajustes no mix <strong>Contesta.ai ↔ Legal Ops</strong> ou nas integrações, conforme:</p>
                            <ul>
                                <li>Dados de mercado</li>
                                <li>Feedback de clientes</li>
                                <li>Feedback de investidores</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Notas para Estratégia -->
                    <div class="notes-section">
                        <h3 class="notes-title">
                            <i class="fas fa-sticky-note"></i>
                            Observações sobre Estratégia
                        </h3>
                        <textarea class="notes-textarea" id="strategy-notes" placeholder="Adicione observações, insights ou próximos passos relacionados à estratégia..."></textarea>
                        <div class="last-updated">
                            <i class="far fa-clock"></i>
                            <span id="strategy-last-updated">Nunca atualizado</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Execução -->
                <div class="tab-pane" id="execucao">
                    <h2 class="tab-title">
                        <i class="fas fa-cogs"></i>
                        Cadência Operacional
                    </h2>
                    <p class="tab-subtitle">Ritmo de execução e processos</p>
                    
                    <div class="content-grid">
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-calendar-week"></i>
                                </div>
                                <h3 class="card-title">Segunda 9h • Weekly</h3>
                            </div>
                            <p><strong>OKRs, funil, produto</strong></p>
                            <p>Duração: 45 minutos</p>
                            <p>Foco em métricas semanais e ajustes rápidos</p>
                        </div>
                        
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <h3 class="card-title">Quinzenal</h3>
                            </div>
                            <p><strong>Review de produto</strong></p>
                            <p>Roadmap e decisões go/kill</p>
                            <p>Avaliação de experimentos e aprendizados</p>
                        </div>
                        
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <h3 class="card-title">Mensal</h3>
                            </div>
                            <p><strong>Board interno</strong></p>
                            <p>Aprendizados, caixa, runway</p>
                            <p>Visão estratégica de 30 dias</p>
                        </div>
                        
                        <div class="info-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-chess-board"></i>
                                </div>
                                <h3 class="card-title">Trimestral</h3>
                            </div>
                            <p><strong>Revisão de estratégia</strong></p>
                            <p>Deliberada ↔ Emergente</p>
                            <p>Ajustes de rota baseados em resultados</p>
                        </div>
                    </div>
                    
                    <!-- Notas para Execução -->
                    <div class="notes-section">
                        <h3 class="notes-title">
                            <i class="fas fa-sticky-note"></i>
                            Observações sobre Execução
                        </h3>
                        <textarea class="notes-textarea" id="execution-notes" placeholder="Adicione observações, insights ou próximos passos relacionados à execução..."></textarea>
                        <div class="last-updated">
                            <i class="far fa-clock"></i>
                            <span id="execution-last-updated">Nunca atualizado</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Riscos -->
                <div class="tab-pane" id="riscos">
                    <h2 class="tab-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Riscos Críticos & Mitigação
                    </h2>
                    <p class="tab-subtitle">Principais ameaças e planos de ação</p>
                    
                    <div class="risks-grid">
                        <div class="risk-card">
                            <h3 class="risk-title">
                                <i class="fas fa-code-branch"></i>
                                Desvio para serviços customizados
                            </h3>
                            <p><strong>Mitigação:</strong> contratos com escopo fechado e catálogo de add-ons</p>
                            <p>Foco em produto escalável vs. serviços personalizados</p>
                        </div>
                        
                        <div class="risk-card">
                            <h3 class="risk-title">
                                <i class="fas fa-globe"></i>
                                Concorrentes globais
                            </h3>
                            <p><strong>Mitigação:</strong> dobrar na especialização jurídica local + integrações nativas</p>
                            <p>Vantagem competitiva através do conhecimento do mercado brasileiro</p>
                        </div>
                        
                        <div class="risk-card">
                            <h3 class="risk-title">
                                <i class="fas fa-plug"></i>
                                Dependência de 1 ERP
                            </h3>
                            <p><strong>Mitigação:</strong> roadmap com 2º conector de segurança</p>
                            <p>Redução do risco de dependência de único fornecedor</p>
                        </div>
                        
                        <div class="risk-card">
                            <h3 class="risk-title">
                                <i class="fas fa-wallet"></i>
                                Runway curto
                            </h3>
                            <p><strong>Mitigação:</strong> foco em POCs pagas e ofertas de setup</p>
                            <p>Geração de caixa imediato enquanto prepara captação</p>
                        </div>
                    </div>
                    
                    <!-- Notas para Riscos -->
                    <div class="notes-section">
                        <h3 class="notes-title">
                            <i class="fas fa-sticky-note"></i>
                            Observações sobre Riscos
                        </h3>
                        <textarea class="notes-textarea" id="risks-notes" placeholder="Adicione observações, insights ou próximos passos relacionados aos riscos..."></textarea>
                        <div class="last-updated">
                            <i class="far fa-clock"></i>
                            <span id="risks-last-updated">Nunca atualizado</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer>
            <p><strong>New Lever - Lean Strategy Dashboard</strong></p>
            <p class="footer-info">
                Estratégia deliberada: Contesta.ai + Integrações essenciais + Escritórios de volume<br>
                Atualizado em <span id="lastUpdated"></span> • Ciclo de aprendizado contínuo • 2025
            </p>
        </footer>
    </div>

    <script>
        // Tabs functionality com persistência
        document.addEventListener('DOMContentLoaded', function() {
            const TAB_KEY = 'nl-lean-active-tab';
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabPanes = document.querySelectorAll('.tab-pane');

            function activateTab(id){
                tabBtns.forEach(b => b.classList.remove('active'));
                tabPanes.forEach(p => p.classList.remove('active'));
                document.querySelector(`.tab-btn[data-tab="${id}"]`).classList.add('active');
                document.getElementById(id).classList.add('active');
                localStorage.setItem(TAB_KEY, id);
            }

            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => activateTab(btn.dataset.tab));
            });

            const saved = localStorage.getItem(TAB_KEY) || 'analise';
            activateTab(saved);

            // Efeito hover nos cards
            const infoCards = document.querySelectorAll('.info-card, .okr-card, .kpi-card, .risk-card');
            infoCards.forEach(card => {
                card.addEventListener('mouseenter', () => card.style.transform = 'translateY(-5px)');
                card.addEventListener('mouseleave', () => card.style.transform = 'translateY(0)');
            });
            
            // Data "Atualizado em"
            document.getElementById('lastUpdated').textContent =
                new Date().toLocaleDateString('pt-BR', { day:'2-digit', month:'2-digit', year:'numeric' });

            // Persistência dos 4 KPIs editáveis
            const KPI_KEY_PREFIX = 'nl-kpi-';
            document.querySelectorAll('[data-kpi]').forEach(el => {
                const key = KPI_KEY_PREFIX + el.dataset.kpi;
                const saved = localStorage.getItem(key);
                if (saved) el.textContent = saved;
                el.addEventListener('blur', () => localStorage.setItem(key, el.textContent.trim()));
            });
            
            // NOVAS FUNCIONALIDADES ADICIONADAS
            
            // Sistema de notas com persistência
            const notesTextareas = document.querySelectorAll('.notes-textarea');
            notesTextareas.forEach(textarea => {
                const key = 'nl-notes-' + textarea.id;
                const lastUpdatedEl = document.getElementById(textarea.id.replace('notes', 'last-updated'));
                
                // Carregar nota salva
                const savedNote = localStorage.getItem(key);
                if (savedNote) {
                    textarea.value = savedNote;
                    updateLastUpdated(lastUpdatedEl, key + '-timestamp');
                }
                
                // Salvar nota ao digitar (com debounce)
                let timeout;
                textarea.addEventListener('input', () => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => {
                        localStorage.setItem(key, textarea.value);
                        localStorage.setItem(key + '-timestamp', new Date().toISOString());
                        updateLastUpdated(lastUpdatedEl, key + '-timestamp');
                    }, 1000);
                });
            });
            
            function updateLastUpdated(element, timestampKey) {
                const timestamp = localStorage.getItem(timestampKey);
                if (timestamp) {
                    const date = new Date(timestamp);
                    element.textContent = 'Atualizado em ' + date.toLocaleDateString('pt-BR') + ' às ' + date.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
                }
            }
            
            // Sistema de progresso para OKRs
            const krProgressElements = document.querySelectorAll('.kr-progress-fill');
            krProgressElements.forEach(element => {
                const krKey = element.dataset.kr;
                const progressKey = 'nl-progress-' + krKey;
                
                // Carregar progresso salvo
                const savedProgress = localStorage.getItem(progressKey);
                if (savedProgress) {
                    element.style.width = savedProgress + '%';
                    document.querySelector(`.kr-progress[data-kr="${krKey}"]`).textContent = savedProgress + '%';
                }
                
                // Permitir clique para definir progresso
                element.parentElement.addEventListener('click', (e) => {
                    if (e.target === element.parentElement) {
                        const rect = element.parentElement.getBoundingClientRect();
                        const percent = Math.min(100, Math.max(0, ((e.clientX - rect.left) / rect.width) * 100));
                        
                        element.style.width = percent + '%';
                        document.querySelector(`.kr-progress[data-kr="${krKey}"]`).textContent = Math.round(percent) + '%';
                        
                        // Salvar progresso
                        localStorage.setItem(progressKey, Math.round(percent));
                        
                        // Atualizar progresso do objetivo
                        updateObjectiveProgress(krKey.split('-')[0]);
                    }
                });
            });
            
            function updateObjectiveProgress(objective) {
                const krs = document.querySelectorAll(`.kr-progress-fill[data-kr^="${objective}-"]`);
                let totalProgress = 0;
                
                krs.forEach(kr => {
                    const progress = parseFloat(kr.style.width) || 0;
                    totalProgress += progress;
                });
                
                const avgProgress = totalProgress / krs.length;
                const progressFill = document.getElementById(`progress-fill-${objective}`);
                const progressText = document.getElementById(`progress-${objective}`);
                
                if (progressFill && progressText) {
                    progressFill.style.width = avgProgress + '%';
                    progressText.textContent = Math.round(avgProgress) + '%';
                }
            }
            
            // Inicializar progresso dos objetivos
            ['pmf', 'org', 'fund'].forEach(obj => {
                updateObjectiveProgress(obj);
            });
            
            // Funcionalidade de busca
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                if (searchTerm.length < 2) {
                    // Resetar busca
                    document.querySelectorAll('.highlight').forEach(el => {
                        el.classList.remove('highlight');
                    });
                    return;
                }
                
                // Buscar em todas as abas
                tabPanes.forEach(pane => {
                    const textNodes = getTextNodes(pane);
                    textNodes.forEach(node => {
                        const parent = node.parentNode;
                        const text = node.textContent.toLowerCase();
                        
                        if (text.includes(searchTerm)) {
                            // Destacar o termo encontrado
                            const regex = new RegExp(`(${searchTerm})`, 'gi');
                            const newHTML = node.textContent.replace(regex, '<mark class="highlight">$1</mark>');
                            
                            const span = document.createElement('span');
                            span.innerHTML = newHTML;
                            parent.replaceChild(span, node);
                        }
                    });
                });
            });
            
            function getTextNodes(element) {
                const textNodes = [];
                
                function findTextNodes(node) {
                    if (node.nodeType === Node.TEXT_NODE && node.textContent.trim().length > 0) {
                        textNodes.push(node);
                    } else {
                        for (let i = 0; i < node.childNodes.length; i++) {
                            findTextNodes(node.childNodes[i]);
                        }
                    }
                }
                
                findTextNodes(element);
                return textNodes;
            }
        });

        // Semáforo: estado + persistência
        (function(){
            const mapColor = { green:'#27ae60', yellow:'#f39c12', red:'#e74c3c' };
            const mapLabel = { green:'Verde', yellow:'Amarelo', red:'Vermelho' };
            const GOALS = [
                { key:'pmf', dot:'dot-pmf', text:'status-text-pmf', default:'yellow' },
                { key:'org', dot:'dot-org', text:'status-text-org', default:'yellow' },
                { key:'fund', dot:'dot-fund', text:'status-text-fund', default:'yellow' },
            ];

            function setGoal(key, val){
                const g = GOALS.find(x=>x.key===key);
                if(!g) return;
                
                // Atualiza a cor da bolinha
                document.getElementById(g.dot).style.background = mapColor[val] || mapColor.yellow;
                
                // Atualiza o texto para impressão
                document.getElementById(g.text).textContent = `(Status: ${mapLabel[val] || mapLabel.yellow})`;
                
                // Atualiza os botões ativos
                document.querySelectorAll(`.goal-button[data-goal="${key}"]`).forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`.goal-button[data-goal="${key}"][data-val="${val}"]`).classList.add('active');
                
                // Salva no localStorage
                localStorage.setItem('nl-status-'+key, val);
            }

            // carregar estados salvos
            GOALS.forEach(g=>{
                const saved = localStorage.getItem('nl-status-'+g.key) || g.default;
                setGoal(g.key, saved);
            });

            // clique nos botões
            document.querySelectorAll('.goal-button').forEach(btn=>{
                btn.addEventListener('click', ()=>{
                    setGoal(btn.dataset.goal, btn.dataset.val);
                });
            });
        })();
    </script>
</body>
</html>
